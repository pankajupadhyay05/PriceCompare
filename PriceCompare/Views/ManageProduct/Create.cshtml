@model PriceCompare.ViewModel.ProductPicView

@{
    ViewBag.Title = "Manage Product - Add Template";
}

<link href="@Url.Content("~/uploadify/uploadify.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<link type="text/css" href="@Url.Content("~/Content/ui-lightness/jquery-ui-1.8.18.custom.css")" rel="Stylesheet" />	
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.18.custom.min.js")" type="text/javascript"></script>

<script src="@Url.Content("~/uploadify/swfobject.js")" type="text/javascript"></script>
<script src="@Url.Content("~/uploadify/jquery.uploadify.v2.1.4.js")" type="text/javascript"></script>

<div class="contentHolder">
    @using (Html.BeginForm())
    {
        @Html.ValidationSummary(true)
            <div class="adminHeading">Add New Product Template</div>
            <div class="adminControls">
                <input class="button" type="submit" value="Save and Exit" />
                @Html.ActionLink("Back to List", "Index", null, new { @class = "button" })
            </div>
            <div id="tabs">
            <ul>
		        <li><a href="#tabs-1">Product Desc</a></li>
		        <li><a href="#tabs-2">Retailer Urls</a></li>
	        </ul>
	        <div id="tabs-1">
            <table width="99%" class="template">
                <tr>
                    <td class="editor-label">
                        @Html.LabelFor(model => model.Product.Name)
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.Product.Name)
                        @Html.ValidationMessageFor(model => model.Product.Name)
                    </td>
                </tr>
                <tr></tr><tr></tr><tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        @Html.LabelFor(model => model.Product.BasePrice)
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.Product.BasePrice)
                        @Html.ValidationMessageFor(model => model.Product.BasePrice)
                    </td>
                </tr>
                <tr></tr><tr></tr><tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        @Html.LabelFor(model => model.Product.CategoryId, "Category")
                    </td>
                    <td class="editor-field">
                        @Html.DropDownGroupListFor(model => model.Product.CategoryId, (IEnumerable<GroupedSelectListItem>)ViewBag.CategoryId, "[None]", new { @class = "required" })
                        @Html.ValidationMessageFor(model => model.Product.CategoryId)
                    </td>
                </tr>
                <tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        @Html.LabelFor(model => model.Product.BrandId, "Brand")
                    </td>
                    <td class="editor-field">
                        @Html.DropDownListFor(model => model.Product.BrandId, (IEnumerable<SelectListItem>)ViewBag.BrandId, "[None]" )
                        @Html.ValidationMessageFor(model => model.Product.BrandId)
                    </td>
                </tr>
                <tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        @Html.LabelFor(model => model.Picture.PictureUrl, "Picture")
                    </td>
                    <td class="editor-field">
                        <div id="pictureImage">
                            <img src="/Content/themes/base/images/noDefaultImage_100.gif" height="100px" width="100px" alt="Product Image" />
                        </div>
                        <div id="pictureRemove" class="t-button" style="display:none;">Remove picture</div><br />
                        @Html.HiddenFor(model => model.Picture.PictureUrl)
                        <div id="file_upload"></div>
                        @Html.ValidationMessageFor(model => model.Picture.PictureUrl)
                    </td>
                </tr>
                <tr>
                    <td class="editor-label">
                        @Html.LabelFor(model => model.Product.ShortDescription)
                    </td>
                    <td class="shortdesc">
                        @Html.EditorFor(model => model.Product.ShortDescription)
                        @Html.ValidationMessageFor(model => model.Product.ShortDescription)
                    </td>
                </tr>
                <tr>
                    <td class="editor-label">
                        @Html.LabelFor(model => model.Product.FullDescription)
                    </td>
                    <td class="fulldesc">
                        @Html.EditorFor(model => model.Product.FullDescription)
                        @Html.ValidationMessageFor(model => model.Product.FullDescription)
                    </td>
                </tr> 
            </table>
            </div>
            <div id="tabs-2">
            <table width="99%" class="template">
                <tr>
                    <td class="editor-label">
                        Flipkart
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url1)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url1)
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url1Offer)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url1Offer)
                    </td>
                </tr>
                <tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        HomeShop
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url2)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url2)
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url2Offer)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url2Offer)
                    </td>
                </tr>
                <tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        SnapDeal
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url3)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url3)
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url3Offer)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url3Offer)
                    </td>
                </tr>
                <tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        Amazon
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url4)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url4)
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url4Offer)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url4Offer)
                    </td>
                </tr>
                <tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        InfiBeam
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url6)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url6)
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url6Offer)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url6Offer)
                    </td>
                </tr>
                <tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        Saholic
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url7)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url7)
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url7Offer)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url7Offer)
                    </td>
                </tr>
                <tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        Indiatimes Shop
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url8)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url8)
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url8Offer)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url8Offer)
                    </td>
                </tr>
                <tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        Croma Retail
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url16)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url16)
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url16Offer)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url16Offer)
                    </td>
                </tr>
                <tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        The Mobile Store
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url17)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url17)
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url8Offer)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url17Offer)
                    </td>
                </tr>
                <tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        BookAdda
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url9)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url9)
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url9Offer)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url9Offer)
                    </td>
                </tr>
                <tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        URead
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url10)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url10)
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url10Offer)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url10Offer)
                    </td>
                </tr>
                <tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        CrossWord
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url11)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url11)
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url11Offer)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url11Offer)
                    </td>
                </tr>
                <tr></tr><tr></tr>
                <tr>
                    <td class="editor-label">
                        LandmarkOnTheNet
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url12)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url12)
                    </td>
                    <td class="editor-field">
                        @Html.EditorFor(model => model.RetailerUrls.Url12Offer)
                        @Html.ValidationMessageFor(model => model.RetailerUrls.Url12Offer)
                    </td>
                </tr>
            </table>    
            </div>
            </div>
    }
    <br />
</div>
<script type="text/javascript">
    var auth = '@(Request.Cookies[FormsAuthentication.FormsCookieName]==null ? string.Empty : Request.Cookies[FormsAuthentication.FormsCookieName].Value)';
    var ASPSESSID = '@Session.SessionID';
    $('#file_upload').uploadify({
        'uploader': '@Url.Content("~/uploadify/uploadify.swf")',
        'script': '@Url.Action("Upload", "ManageProduct")',
        'cancelImg': '@Url.Content("~/uploadify/cancel.png")',
        'buttonText': 'Upload',
        'folder': '@Url.Content("~/content/images")',
        'fileDesc': 'Image Files',
        'fileExt': '*.jpg;*.jpeg;*.gif;*.png',
        'scriptData': { ASPSESSID: ASPSESSID, AUTHID: auth },
        'auto': true,
        'onComplete': function (event, ID, fileObj, response, data) {
            var json = jQuery.parseJSON(response);
            $("#pictureImage").html("<img src='" + json + "' alt='" + json + "' height='100px' width='100px'/>");
            $("#Picture_PictureUrl").val(json);
            $("#pictureRemove").show();
        }

    });
    $("#pictureRemove").click(function (e) {
        $("#pictureImage").html("<img src='/Content/themes/base/images/noDefaultImage_100.gif' height='100px' width='100px'/>");
        $(this).hide();
        $.ajax({
            type: 'POST',
            url: '@Url.Action("Remove", "Product")',
            data: { fileName: $('#Picture_PictureUrl').val() },
            dataType: 'json'
            // User your JSON response.
        });
        $("#Picture_PictureUrl").val('');
    });
    $(function () {
        $("#tabs").tabs();
    });    
</script>